<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ•Œ</text></svg>">
  <title>Namaz Vakitleri</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f8f9fa;
      color: #222;
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    
    .container {
      max-width: 100%;
      padding: 10px;
    }
    
    h1 {
      margin: 15px 0 10px 0;
      color: #00695c;
      font-size: 1.5rem;
      padding: 0 10px;
    }
    
    .controls {
      margin: 15px auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      padding: 0 10px;
    }
    
    .select-group {
      display: flex;
      gap: 10px;
      width: 100%;
      max-width: 400px;
    }
    
    select, button {
      padding: 12px 15px;
      border: 1px solid #009688;
      border-radius: 8px;
      font-size: 16px;
      background: white;
      cursor: pointer;
      width: 100%;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }
    
    select {
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23009688' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 16px;
      padding-right: 40px;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      width: 100%;
      max-width: 400px;
    }
    
    button {
      background: #009688;
      color: white;
      border: none;
      transition: all 0.3s ease;
      font-weight: 600;
      flex: 1;
    }
    
    button:active {
      transform: scale(0.98);
      background: #00796b;
    }
    
    button:hover {
      background: #00796b;
    }
    
    button:disabled {
      background: #cccccc;
      cursor: not-allowed;
      transform: none;
    }
    
    #bildirimBtn.bildirim-acik {
      background: #d32f2f;
    }
    
    #bildirimBtn.bildirim-acik:active {
      background: #c62828;
    }
    
    .notification-status {
      margin: 8px 0;
      font-size: 14px;
      color: #666;
      padding: 0 10px;
    }
    
    .notification-status.acik {
      color: #388e3c;
      font-weight: bold;
    }
    
    .location-info {
      margin: 10px auto;
      font-size: 14px;
      color: #555;
      padding: 0 15px;
      line-height: 1.4;
    }
    
    .current-prayer {
      margin: 15px auto;
      padding: 20px 15px;
      background: linear-gradient(135deg, #009688, #00695c);
      color: white;
      border-radius: 12px;
      max-width: 400px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    }
    
    .current-prayer h2 {
      margin: 0 0 12px 0;
      font-size: 16px;
      font-weight: 600;
    }
    
    .current-prayer .prayer-name {
      font-size: 22px;
      font-weight: bold;
      margin: 8px 0;
    }
    
    .current-prayer .time-left {
      font-size: 15px;
      margin-top: 12px;
      opacity: 0.95;
      line-height: 1.4;
    }
    
    .table-container {
      overflow-x: auto;
      margin: 15px 10px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      min-width: 300px;
    }
    
    th, td {
      padding: 14px 16px;
      border-bottom: 1px solid #e0e0e0;
      text-align: center;
    }
    
    th {
      background: #009688;
      color: white;
      font-weight: 600;
      position: sticky;
      top: 0;
    }
    
    tr.current {
      background: #e0f2f1 !important;
      font-weight: bold;
      color: #00695c;
    }
    
    tr:nth-child(even) {
      background: #f8f8f8;
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    footer {
      margin: 20px 0 0 0;
      padding: 20px 15px;
      background: #009688;
      color: white;
      font-style: italic;
      line-height: 1.5;
    }
    
    .auto-location-info {
      background: #e3f2fd;
      padding: 8px 15px;
      border-radius: 8px;
      margin: 10px auto;
      max-width: 400px;
      font-size: 14px;
      color: #1565c0;
    }
    
    /* Mobil iÃ§in Ã¶zel stiller */
    @media (min-width: 768px) {
      .container {
        max-width: 600px;
        margin: 0 auto;
      }
      
      .controls {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .select-group {
        max-width: 300px;
      }
      
      .button-group {
        max-width: 300px;
      }
      
      h1 {
        font-size: 2rem;
        margin: 20px 0 15px 0;
      }
      
      .current-prayer {
        padding: 25px 20px;
      }
      
      .current-prayer h2 {
        font-size: 18px;
      }
      
      .current-prayer .prayer-name {
        font-size: 26px;
      }
    }
    
    @media (max-width: 380px) {
      .select-group, .button-group {
        flex-direction: column;
      }
      
      select, button {
        font-size: 14px;
        padding: 10px 12px;
      }
      
      th, td {
        padding: 12px 10px;
        font-size: 14px;
      }
    }
    
    /* YÃ¼kleniyor animasyonu */
    .loading {
      opacity: 0.7;
      pointer-events: none;
    }
    
    .emoji {
      font-size: 1.2em;
      vertical-align: middle;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ•Œ Namaz Vakitleri</h1>
    
    <div class="auto-location-info" id="autoLocationInfo" style="display: none;">
      ğŸ“ KayÄ±tlÄ± konumunuz otomatik yÃ¼klendi. DeÄŸiÅŸtirmek iÃ§in yeniden seÃ§in.
    </div>
    
    <div class="controls">
      <div class="select-group">
        <select id="ulkeSelect">
          <option value="Turkey">TÃ¼rkiye</option>
          <option value="Germany">Almanya</option>
          <option value="France">Fransa</option>
          <option value="USA">Amerika</option>
        </select>
        
        <select id="sehirSelect">
          <!-- TÃ¼rkiye ÅŸehirleri -->
          <option value="Adana">Adana</option>
          <option value="AdÄ±yaman">AdÄ±yaman</option>
          <option value="Afyonkarahisar">Afyonkarahisar</option>
          <option value="AÄŸrÄ±">AÄŸrÄ±</option>
          <option value="Aksaray">Aksaray</option>
          <option value="Amasya">Amasya</option>
          <option value="Ankara">Ankara</option>
          <option value="Antalya">Antalya</option>
          <option value="Ardahan">Ardahan</option>
          <option value="Artvin">Artvin</option>
          <option value="AydÄ±n">AydÄ±n</option>
          <option value="BalÄ±kesir">BalÄ±kesir</option>
          <option value="BartÄ±n">BartÄ±n</option>
          <option value="Batman">Batman</option>
          <option value="Bayburt">Bayburt</option>
          <option value="Bilecik">Bilecik</option>
          <option value="BingÃ¶l">BingÃ¶l</option>
          <option value="Bitlis">Bitlis</option>
          <option value="Bolu">Bolu</option>
          <option value="Burdur">Burdur</option>
          <option value="Bursa">Bursa</option>
          <option value="Ã‡anakkale">Ã‡anakkale</option>
          <option value="Ã‡ankÄ±rÄ±">Ã‡ankÄ±rÄ±</option>
          <option value="Ã‡orum">Ã‡orum</option>
          <option value="Denizli">Denizli</option>
          <option value="DiyarbakÄ±r">DiyarbakÄ±r</option>
          <option value="DÃ¼zce">DÃ¼zce</option>
          <option value="Edirne">Edirne</option>
          <option value="ElazÄ±ÄŸ">ElazÄ±ÄŸ</option>
          <option value="Erzincan">Erzincan</option>
          <option value="Erzurum">Erzurum</option>
          <option value="EskiÅŸehir">EskiÅŸehir</option>
          <option value="Gaziantep">Gaziantep</option>
          <option value="Giresun">Giresun</option>
          <option value="GÃ¼mÃ¼ÅŸhane">GÃ¼mÃ¼ÅŸhane</option>
          <option value="Hakkari">Hakkari</option>
          <option value="Hatay">Hatay</option>
          <option value="IÄŸdÄ±r">IÄŸdÄ±r</option>
          <option value="Isparta">Isparta</option>
          <option value="Ä°stanbul">Ä°stanbul</option>
          <option value="Ä°zmir">Ä°zmir</option>
          <option value="KahramanmaraÅŸ">KahramanmaraÅŸ</option>
          <option value="KarabÃ¼k">KarabÃ¼k</option>
          <option value="Karaman">Karaman</option>
          <option value="Kars">Kars</option>
          <option value="Kastamonu">Kastamonu</option>
          <option value="Kayseri">Kayseri</option>
          <option value="KÄ±rÄ±kkale">KÄ±rÄ±kkale</option>
          <option value="KÄ±rklareli">KÄ±rklareli</option>
          <option value="KÄ±rÅŸehir">KÄ±rÅŸehir</option>
          <option value="Kilis">Kilis</option>
          <option value="Kocaeli">Kocaeli</option>
          <option value="Konya">Konya</option>
          <option value="KÃ¼tahya">KÃ¼tahya</option>
          <option value="Malatya">Malatya</option>
          <option value="Manisa">Manisa</option>
          <option value="Mardin">Mardin</option>
          <option value="Mersin">Mersin</option>
          <option value="MuÄŸla">MuÄŸla</option>
          <option value="MuÅŸ">MuÅŸ</option>
          <option value="NevÅŸehir">NevÅŸehir</option>
          <option value="NiÄŸde">NiÄŸde</option>
          <option value="Ordu">Ordu</option>
          <option value="Osmaniye">Osmaniye</option>
          <option value="Rize">Rize</option>
          <option value="Sakarya">Sakarya</option>
          <option value="Samsun">Samsun</option>
          <option value="Siirt">Siirt</option>
          <option value="Sinop">Sinop</option>
          <option value="Sivas">Sivas</option>
          <option value="ÅanlÄ±urfa">ÅanlÄ±urfa</option>
          <option value="ÅÄ±rnak">ÅÄ±rnak</option>
          <option value="TekirdaÄŸ">TekirdaÄŸ</option>
          <option value="Tokat">Tokat</option>
          <option value="Trabzon">Trabzon</option>
          <option value="Tunceli">Tunceli</option>
          <option value="UÅŸak">UÅŸak</option>
          <option value="Van">Van</option>
          <option value="Yalova">Yalova</option>
          <option value="Yozgat">Yozgat</option>
          <option value="Zonguldak">Zonguldak</option>
        </select>
      </div>
      
      <div class="button-group">
        <button id="vakitGetirBtn">ğŸ“… Vakitleri Getir</button>
        <button id="konumBtn">ğŸ“ Konumumu Kullan</button>
        <button id="bildirimBtn">ğŸ”” </button>
      </div>
    </div>
    
    <div class="notification-status" id="bildirimDurum">
      ğŸ”• Bildirimler: KapalÄ±
    </div>
    
    <div class="location-info" id="konumBilgi">
      Vakitleri gÃ¶rmek iÃ§in ÅŸehir seÃ§in veya konumunuzu kullanÄ±n
    </div>
    
    <div class="current-prayer" id="suankiVakit" style="display: none;">
      <h2>ğŸ•‹ Åu Anki Vakit</h2>
      <div class="prayer-name" id="vakitAdi">-</div>
      <div class="time-left" id="kalanSure">-</div>
    </div>
    
    <div class="table-container">
      <table id="vakitler">
        <tr><th>Vakit</th><th>Saat</th></tr>
      </table>
    </div>
    
    <footer id="ayet"></footer>
  </div>

  <script>
    // DeÄŸiÅŸkenler
    let bildirimAktif = false;
    let zamanlayicilar = [];
    let suankiVakitTimer = null;
    let namazVakitleri = {};
    let kullaniciKonumKaydet = true; // Konum kaydetme Ã¶zelliÄŸi aktif

    // TÃ¼rkÃ§e isim eÅŸleÅŸtirmesi
    const ceviri = {
      "Fajr": "Ä°msak",
      "Sunrise": "GÃ¼neÅŸ",
      "Dhuhr": "Ã–ÄŸle",
      "Asr": "Ä°kindi",
      "Maghrib": "AkÅŸam",
      "Isha": "YatsÄ±"
    };

    // Vakit sÄ±ralamasÄ±
    const vakitSirasi = ["Ä°msak", "GÃ¼neÅŸ", "Ã–ÄŸle", "Ä°kindi", "AkÅŸam", "YatsÄ±"];

      // Rasgele ayetler
    const ayetler = [
  "â€œÅÃ¼phesiz ki namaz, mÃ¼minlere vakitleri belirlenmiÅŸ bir farzdÄ±r.â€ (NisÃ¢, 103)",
  "â€œEy iman edenler! SabÄ±r ve namazla yardÄ±m dileyin. Allah sabredenlerle beraberdir.â€ (Bakara, 153)",
  "â€œNamazÄ± dosdoÄŸru kÄ±lÄ±n, zekÃ¢tÄ± verin ve rÃ¼kÃ» edenlerle birlikte rÃ¼kÃ» edin.â€ (Bakara, 43)",
  "â€œRabbini sabah akÅŸam zikret.â€ (Ä°nsan, 25)",
  "â€œBen cinleri ve insanlarÄ± ancak bana kulluk etsinler diye yarattÄ±m.â€ (ZÃ¢riyÃ¢t, 56)",
  "â€œÅÃ¼phesiz kalpler ancak Allahâ€™Ä±n zikriyle huzur bulur.â€ (Raâ€™d, 28)",
  "â€œNamaz kÃ¶tÃ¼lÃ¼kten ve hayasÄ±zlÄ±ktan alÄ±koyar.â€ (AnkebÃ»t, 45)",
  "â€œRabbinize dua edin, Oâ€™na alÃ§ak gÃ¶nÃ¼llÃ¼lÃ¼kle ve gizlice yalvarÄ±n.â€ (Aâ€™rÃ¢f, 55)",
  "â€œKim Allahâ€™a yÃ¶nelirse, Allah da ona rahmet kapÄ±larÄ±nÄ± aÃ§ar.â€ (ZÃ¼mer, 54)",
  "â€œRabbim! Bana ve ana babama nimet verdiÄŸin iÃ§in ÅŸÃ¼kretmemi saÄŸla.â€ (Neml, 19)",
  "â€œÅÃ¼krederseniz, elbette size nimetimi artÄ±rÄ±rÄ±m.â€ (Ä°brahim, 7)",
  "â€œAllah sabredenleri sever.â€ (Ã‚l-i Ä°mrÃ¢n, 146)",
  "â€œNamazÄ± kÄ±l, zekÃ¢tÄ± ver ve Allahâ€™a gÃ¼zel bir borÃ§ ver.â€ (MÃ¼zzemmil, 20)",
  "â€œRabbini sabah akÅŸam Ã¶verek tesbih et.â€ (TÃ¢hÃ¢, 130)",
  "â€œHer kim Allahâ€™a tevekkÃ¼l ederse, O ona yeter.â€ (TalÃ¢k, 3)",
  "â€œRabbim beni ve soyumdan gelecekleri namazÄ± devamlÄ± kÄ±lanlardan eyle.â€ (Ä°brahim, 40)",
  "â€œEy iman edenler! Allahâ€™Ä± Ã§okÃ§a zikredin.â€ (AhzÃ¢b, 41)",
  "â€œUnuttuÄŸun zaman Rabbini an ve â€˜UmarÄ±m Rabbim beni daha hayÄ±rlÄ±sÄ±na ulaÅŸtÄ±rÄ±râ€™ de.â€ (Kehf, 24)",
  "â€œAllahâ€™a yÃ¶nelen bir kalple gelenden baÅŸkasÄ± o gÃ¼n kurtulamaz.â€ (ÅuarÃ¢, 89)",
  "â€œAllahâ€™a karÅŸÄ± gelmekten sakÄ±nÄ±n ki kurtuluÅŸa eresiniz.â€ (Ã‚l-i Ä°mrÃ¢n, 200)",
  "â€œAllah dilediÄŸini doÄŸru yola iletir.â€ (Bakara, 213)",
  "â€œKim Allahâ€™tan korkarsa, Allah ona bir Ã§Ä±kÄ±ÅŸ yolu verir.â€ (TalÃ¢k, 2)",
  "â€œRabbine tevekkÃ¼l et, Ã§Ã¼nkÃ¼ sen apaÃ§Ä±k bir hak Ã¼zerindesin.â€ (Neml, 79)",
  "â€œEy iman edenler! Allahâ€™tan korkun ve doÄŸrularla beraber olun.â€ (Tevbe, 119)",
  "â€œAllah sizin suretlerinize deÄŸil, kalplerinize bakar.â€ (MÃ¼slim, 2564 - Hadis meali)",
  "â€œRabbinizden baÄŸÄ±ÅŸlanma dileyin, Ã§Ã¼nkÃ¼ O Ã§ok baÄŸÄ±ÅŸlayandÄ±r.â€ (Nuh, 10)",
  "â€œSabredin. Ã‡Ã¼nkÃ¼ Allah iyilik yapanlarÄ±n ecrini zayi etmez.â€ (HÃ»d, 115)",
  "â€œRabbim bana yeter. O ne gÃ¼zel vekildir.â€ (Ã‚l-i Ä°mrÃ¢n, 173)",
  "â€œAllahâ€™a Ã§aÄŸÄ±ran, salih amel iÅŸleyen ve â€˜Ben MÃ¼slÃ¼manÄ±mâ€™ diyenden daha gÃ¼zel sÃ¶zlÃ¼ kim vardÄ±r?â€ (Fussilet, 33)",
  "â€œEy Rabbimiz! Bizi doÄŸru yola ilettikten sonra kalplerimizi eÄŸriltme.â€ (Ã‚l-i Ä°mrÃ¢n, 8)",
  "â€œAllah bir toplumu, onlar kendilerini deÄŸiÅŸtirmedikÃ§e deÄŸiÅŸtirmez.â€ (Raâ€™d, 11)",
  "â€œRabbini zikret; kalbin huzur bulsun.â€ (Raâ€™d, 28)",
  "â€œGerÃ§ek kurtuluÅŸ, kalbini Allahâ€™a teslim edenlerindir.â€ (Bakara, 112)",
  "â€œHer kim Allahâ€™a yÃ¶nelirse, Allah onun iÅŸini kolaylaÅŸtÄ±rÄ±r.â€ (TalÃ¢k, 4)",
  "â€œEy iman edenler! Allahâ€™tan korkun, herkes yarÄ±n iÃ§in ne hazÄ±rladÄ±ÄŸÄ±na baksÄ±n.â€ (HaÅŸr, 18)",
  "â€œAllahâ€™Ä±n rahmetinden Ã¼mit kesmeyin.â€ (ZÃ¼mer, 53)",
  "â€œRabbine yÃ¶nel, Oâ€™na dayan.â€ (MÃ¼zzemmil, 8)",
  "â€œRabbine secde et ve Oâ€™na yaklaÅŸ.â€ (Alak, 19)",
  "â€œAllah katÄ±nda en deÄŸerli olanÄ±nÄ±z, Oâ€™ndan en Ã§ok sakÄ±nanÄ±nÄ±zdÄ±r.â€ (HucurÃ¢t, 13)",
  "â€œZorlukla beraber mutlaka bir kolaylÄ±k vardÄ±r.â€ (Ä°nÅŸirÃ¢h, 6)",
  "â€œRabbim! Ä°limde beni artÄ±r.â€ (TÃ¢hÃ¢, 114)",
  "â€œKim Allahâ€™a sÄ±ÄŸÄ±nÄ±rsa, Allah ona yeter.â€ (AhzÃ¢b, 3)",
  "â€œAllah kuluna kÃ¢fi deÄŸil mi?â€ (ZÃ¼mer, 36)",
  "â€œSabÄ±rla ve gÃ¼zel davranÄ±ÅŸla kÃ¶tÃ¼lÃ¼ÄŸÃ¼ sav.â€ (Fussilet, 34)",
  "â€œRabbine yÃ¶nelen kimse iÃ§in bir kurtuluÅŸ vardÄ±r.â€ (NÃ¢ziÃ¢t, 40-41)",
  "â€œGecenin bir kÄ±smÄ±nda kalk ve Oâ€™na secde et.â€ (Ä°nsÃ¢n, 26)",
  "â€œGerÃ§ekten insan, ancak Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ±n karÅŸÄ±lÄ±ÄŸÄ±nÄ± alÄ±r.â€ (Necm, 39)",
  "â€œRabbinin hÃ¼kmÃ¼ne sabret, Ã§Ã¼nkÃ¼ sen bizim gÃ¶zlerimiz Ã¶nÃ¼ndesin.â€ (TÃ»r, 48)",
  "â€œAllahâ€™Ä±n ipine hepiniz sÄ±msÄ±kÄ± sarÄ±lÄ±n.â€ (Ã‚l-i Ä°mrÃ¢n, 103)",
  "â€œDÃ¼nya hayatÄ± bir oyun ve eÄŸlenceden ibarettir.â€ (AnkebÃ»t, 64)",
  "â€œRabbine hamdet ve secde edenlerden ol.â€ (Hicr, 98)",
  "â€œRabbimiz! Ãœzerimize sabÄ±r yaÄŸdÄ±r, ayaklarÄ±mÄ±zÄ± sabit kÄ±l.â€ (Bakara, 250)",
  "â€œAllah sabredenlerle beraberdir.â€ (Bakara, 153)",
  "â€œKim bir iyilik yaparsa, ona on katÄ± verilir.â€ (Enâ€™Ã¢m, 160)",
  "â€œAllah adaletli davranmanÄ±zÄ± ve iyilik yapmanÄ±zÄ± emreder.â€ (Nahl, 90)",
  "â€œHer nefis Ã¶lÃ¼mÃ¼ tadacaktÄ±r.â€ (Ã‚l-i Ä°mrÃ¢n, 185)",
  "â€œRabbim! GÃ¶nlÃ¼mÃ¼ geniÅŸlet, iÅŸimi kolaylaÅŸtÄ±r.â€ (TÃ¢hÃ¢, 25-26)",
  "â€œKim Allahâ€™Ä± unutursa, Allah da ona kendini unutturur.â€ (HaÅŸr, 19)",
  "â€œAllah kuluna zulmetmez.â€ (Ã‚l-i Ä°mrÃ¢n, 182)",
  "â€œHiÃ§ bilenlerle bilmeyenler bir olur mu?â€ (ZÃ¼mer, 9)",
  "â€œEy iman edenler! SabÄ±r ve namazla Allahâ€™tan yardÄ±m isteyin.â€ (Bakara, 45)",
  "â€œRabbine dua et ve kurban kes.â€ (Kevser, 2)",
  "â€œRabbinin adÄ±nÄ± an ve bÃ¼tÃ¼n benliÄŸinle Oâ€™na yÃ¶nel.â€ (MÃ¼zzemmil, 8)",
  "â€œYeryÃ¼zÃ¼nde kibirle yÃ¼rÃ¼me.â€ (Lokman, 18)",
  "â€œÅÃ¼phesiz Allah, tÃ¶vbe edenleri sever.â€ (Bakara, 222)",
  "â€œAllah, yapÄ±lan her iÅŸi hakkÄ±yla gÃ¶rÃ¼r.â€ (AhzÃ¢b, 9)",
  "â€œRabbin sana darÄ±lmadÄ± ve seni terk etmedi.â€ (DuhÃ¢, 3)",
  "â€œÅÃ¼phesiz Allahâ€™Ä±n vaadi gerÃ§ektir.â€ (YÃ»nus, 55)",
  "â€œAllah kimseye gÃ¼cÃ¼nÃ¼n yettiÄŸinden fazlasÄ±nÄ± yÃ¼klemez.â€ (Bakara, 286)",
  "â€œRabbinin nimetini an ve ÅŸÃ¼kret.â€ (Duha, 11)",
  "â€œAllahâ€™Ä±n rahmeti geniÅŸtir.â€ (Aâ€™rÃ¢f, 156)",
  "â€œÅeytan sizi fakirlikle korkutur, Allah ise lÃ¼tfu ile mÃ¼jdeler.â€ (Bakara, 268)",
  "â€œEy iman edenler! Allahâ€™tan korkun ve doÄŸru sÃ¶z sÃ¶yleyin.â€ (AhzÃ¢b, 70)",
  "â€œAllahâ€™a itaat edin, Peygamberâ€™e de itaat edin.â€ (NisÃ¢, 59)",
  "â€œAllah, gÃ¼zel davrananlarÄ± sever.â€ (Bakara, 195)",
  "â€œÄ°yilikle kÃ¶tÃ¼lÃ¼k bir olmaz; sen kÃ¶tÃ¼lÃ¼ÄŸÃ¼ en gÃ¼zel ÅŸekilde sav.â€ (Fussilet, 34)",
  "â€œEy iman edenler! Allahâ€™a karÅŸÄ± gelmekten sakÄ±nÄ±n.â€ (HaÅŸr, 18)",
  "â€œAllahâ€™Ä±n yardÄ±mÄ± ve zaferi geldiÄŸinde Rabbini hamd ile tesbih et.â€ (Nasr, 1-3)",
  "â€œRabbimiz! Bizi doÄŸru yola ilet.â€ (FÃ¢tiha, 6)",
  "â€œKim Allahâ€™a yÃ¶nelirse, Allah onun gÃ¶ÄŸsÃ¼nÃ¼ aÃ§ar.â€ (ZÃ¼mer, 22)",
  "â€œAllah, kullarÄ±na karÅŸÄ± Ã§ok merhametlidir.â€ (Bakara, 143)",
  "â€œAllahâ€™Ä±n izni olmadÄ±kÃ§a hiÃ§bir musibet gelmez.â€ (TeÄŸÃ¢bÃ¼n, 11)",
  "â€œRabbim beni dosdoÄŸru yola ilet.â€ (YÃ¢sÃ®n, 61)",
  "â€œKullarÄ±m sana beni sorduklarÄ±nda, ben onlara Ã§ok yakÄ±nÄ±m.â€ (Bakara, 186)",
  "â€œEy iman edenler! Allahâ€™a ve Peygamberine itaat edin.â€ (EnfÃ¢l, 20)",
  "â€œHiÃ§ ÅŸÃ¼phesiz Allah, vaadinden dÃ¶nmez.â€ (RÃ»m, 6)",
  "â€œAllahâ€™Ä±n ipine sÄ±msÄ±kÄ± sarÄ±lÄ±n ve ayrÄ±lÄ±ÄŸa dÃ¼ÅŸmeyin.â€ (Ã‚l-i Ä°mrÃ¢n, 103)",
  "â€œAllahâ€™Ä±n rahmeti, iyi iÅŸ yapanlara yakÄ±ndÄ±r.â€ (Aâ€™rÃ¢f, 56)",
  "â€œRabbin affedici ve merhametlidir.â€ (Kehf, 58)",
  "â€œAllahâ€™a tevekkÃ¼l et, O vekil olarak yeter.â€ (AhzÃ¢b, 3)",
  "â€œRabbine yÃ¶nel, Ã§Ã¼nkÃ¼ dÃ¶nÃ¼ÅŸ yalnÄ±z Oâ€™nadÄ±r.â€ (Alak, 8)",
  "â€œAllahâ€™Ä±n yardÄ±mÄ± yakÄ±ndÄ±r.â€ (Bakara, 214)",
  "â€œAllahâ€™a sÄ±ÄŸÄ±nÄ±n, Ã§Ã¼nkÃ¼ O iÅŸiten ve bilendir.â€ (MÃ¼min, 60)",
  "â€œO, sizi karanlÄ±klardan aydÄ±nlÄ±ÄŸa Ã§Ä±karandÄ±r.â€ (HadÃ®d, 9)",
  "â€œRabbinin hÃ¼kmÃ¼ne sabret; Ã§Ã¼nkÃ¼ O, en iyi hÃ¼kmedenlerin ta kendisidir.â€ (YÃ»nus, 109)"
];

    // Ãœlkelere gÃ¶re ÅŸehirler
    const sehirler = {
      "Turkey": [
        "Adana", "AdÄ±yaman", "Afyonkarahisar", "AÄŸrÄ±", "Aksaray", "Amasya", "Ankara", "Antalya", 
        "Ardahan", "Artvin", "AydÄ±n", "BalÄ±kesir", "BartÄ±n", "Batman", "Bayburt", "Bilecik", 
        "BingÃ¶l", "Bitlis", "Bolu", "Burdur", "Bursa", "Ã‡anakkale", "Ã‡ankÄ±rÄ±", "Ã‡orum", 
        "Denizli", "DiyarbakÄ±r", "DÃ¼zce", "Edirne", "ElazÄ±ÄŸ", "Erzincan", "Erzurum", "EskiÅŸehir", 
        "Gaziantep", "Giresun", "GÃ¼mÃ¼ÅŸhane", "Hakkari", "Hatay", "IÄŸdÄ±r", "Isparta", "Ä°stanbul", 
        "Ä°zmir", "KahramanmaraÅŸ", "KarabÃ¼k", "Karaman", "Kars", "Kastamonu", "Kayseri", "KÄ±rÄ±kkale", 
        "KÄ±rklareli", "KÄ±rÅŸehir", "Kilis", "Kocaeli", "Konya", "KÃ¼tahya", "Malatya", "Manisa", 
        "Mardin", "Mersin", "MuÄŸla", "MuÅŸ", "NevÅŸehir", "NiÄŸde", "Ordu", "Osmaniye", "Rize", 
        "Sakarya", "Samsun", "Siirt", "Sinop", "Sivas", "ÅanlÄ±urfa", "ÅÄ±rnak", "TekirdaÄŸ", 
        "Tokat", "Trabzon", "Tunceli", "UÅŸak", "Van", "Yalova", "Yozgat", "Zonguldak"
      ],
      "Germany": [
        "Berlin", "Munich", "Hamburg", "Cologne", "Frankfurt", "Stuttgart", "DÃ¼sseldorf", 
        "Dortmund", "Essen", "Leipzig", "Bremen", "Dresden", "Hannover", "Nuremberg"
      ],
      "France": [
        "Paris", "Marseille", "Lyon", "Toulouse", "Nice", "Nantes", "Strasbourg", "Montpellier", 
        "Bordeaux", "Lille", "Rennes", "Reims", "Le Havre", "Saint-Ã‰tienne"
      ],
      "USA": [
        "New York", "Los Angeles", "Chicago", "Houston", "Phoenix", "Philadelphia", "San Antonio", 
        "San Diego", "Dallas", "San Jose", "Austin", "Jacksonville", "Fort Worth", "Columbus"
      ]
    };

    // LocalStorage anahtarlarÄ±
    const STORAGE_KEYS = {
      ULKE: 'namazVakitleri_ulke',
      SEHIR: 'namazVakitleri_sehir',
      KONUM_KAYITLI: 'namazVakitleri_konumKayitli'
    };

    // Elementleri seÃ§
    const ulkeSelect = document.getElementById('ulkeSelect');
    const sehirSelect = document.getElementById('sehirSelect');
    const vakitGetirBtn = document.getElementById('vakitGetirBtn');
    const konumBtn = document.getElementById('konumBtn');
    const bildirimBtn = document.getElementById('bildirimBtn');
    const bildirimDurum = document.getElementById('bildirimDurum');
    const konumBilgi = document.getElementById('konumBilgi');
    const suankiVakitDiv = document.getElementById('suankiVakit');
    const vakitAdi = document.getElementById('vakitAdi');
    const kalanSure = document.getElementById('kalanSure');
    const autoLocationInfo = document.getElementById('autoLocationInfo');
    const container = document.querySelector('.container');

    // Sayfa yÃ¼klendiÄŸinde
    window.addEventListener('load', function() {
      // Footer'da rasgele ayet
      document.getElementById("ayet").innerText = ayetler[Math.floor(Math.random() * ayetler.length)];
      
      // KayÄ±tlÄ± konumu kontrol et ve yÃ¼kle
      kayitliKonumuYukle();
      
      // Bildirim iznini kontrol et
      bildirimIzniniKontrolEt();
    });

    // LocalStorage'dan kayÄ±tlÄ± konumu yÃ¼kle
    function kayitliKonumuYukle() {
      const kayitliUlke = localStorage.getItem(STORAGE_KEYS.ULKE);
      const kayitliSehir = localStorage.getItem(STORAGE_KEYS.SEHIR);
      const konumKayitli = localStorage.getItem(STORAGE_KEYS.KONUM_KAYITLI) === 'true';
      
      if (konumKayitli && kayitliUlke && kayitliSehir) {
        // UI'Ä± gÃ¼ncelle
        ulkeSelect.value = kayitliUlke;
        sehirleriGuncelle(kayitliUlke);
        
        // Åehri seÃ§ (listede varsa)
        setTimeout(() => {
          if (sehirSelect.querySelector(`option[value="${kayitliSehir}"]`)) {
            sehirSelect.value = kayitliSehir;
          } else if (sehirSelect.options.length > 0) {
            sehirSelect.selectedIndex = 0;
          }
          
          // Vakitleri getir
          vakitleriGetir(kayitliUlke, sehirSelect.value);
          
          // Bilgi mesajÄ±nÄ± gÃ¶ster
          autoLocationInfo.style.display = 'block';
          autoLocationInfo.innerHTML = `ğŸ“ KayÄ±tlÄ± konumunuz <strong>${kayitliSehir}, ${ulkeSelect.options[ulkeSelect.selectedIndex].text}</strong> otomatik yÃ¼klendi.`;
          konumBilgi.textContent = `Åehir: ${sehirSelect.value}, Ãœlke: ${ulkeSelect.options[ulkeSelect.selectedIndex].text}`;
        }, 100);
      } else {
        // VarsayÄ±lan olarak IÄŸdÄ±r'Ä± yÃ¼kle
        ulkeSelect.value = "Turkey";
        sehirSelect.value = "IÄŸdÄ±r";
        vakitleriGetir('Turkey', 'IÄŸdÄ±r');
      }
    }

    // Konumu LocalStorage'a kaydet
    function konumuKaydet(ulke, sehir) {
      if (!kullaniciKonumKaydet) return;
      
      localStorage.setItem(STORAGE_KEYS.ULKE, ulke);
      localStorage.setItem(STORAGE_KEYS.SEHIR, sehir);
      localStorage.setItem(STORAGE_KEYS.KONUM_KAYITLI, 'true');
      
      console.log(`Konum kaydedildi: ${sehir}, ${ulke}`);
    }

    // Ãœlke deÄŸiÅŸtiÄŸinde ÅŸehirleri gÃ¼ncelle
    ulkeSelect.addEventListener('change', function() {
      const ulke = this.value;
      sehirleriGuncelle(ulke);
      
      // Yeni konumu kaydet
      if (sehirSelect.value) {
        konumuKaydet(ulke, sehirSelect.value);
        autoLocationInfo.style.display = 'none';
      }
    });

    // Åehir deÄŸiÅŸtiÄŸinde
    sehirSelect.addEventListener('change', function() {
      const ulke = ulkeSelect.value;
      const sehir = this.value;
      
      // Vakitleri getir
      vakitleriGetir(ulke, sehir);
      
      // Yeni konumu kaydet
      konumuKaydet(ulke, sehir);
      autoLocationInfo.style.display = 'none';
    });

    // Åehirleri gÃ¼ncelle fonksiyonu
    function sehirleriGuncelle(ulke) {
      const sehirListesi = sehirler[ulke] || [];
      
      // Åehir select'ini temizle
      sehirSelect.innerHTML = '';
      
      // Yeni ÅŸehirleri ekle
      sehirListesi.forEach(sehir => {
        const option = document.createElement('option');
        option.value = sehir;
        option.textContent = sehir;
        sehirSelect.appendChild(option);
      });
    }

    // Bildirim iznini kontrol et
    function bildirimIzniniKontrolEt() {
      if ("Notification" in window) {
        if (Notification.permission === "granted") {
          bildirimAktif = true;
          bildirimBtn.textContent = "ğŸ”• Bildirimleri Kapat";
          bildirimBtn.classList.add('bildirim-acik');
          bildirimDurum.textContent = "ğŸ”” Bildirimler: AÃ§Ä±k";
          bildirimDurum.classList.add('acik');
        } else {
          bildirimAktif = false;
          bildirimBtn.textContent = "ğŸ”” Bildirimleri AÃ§";
          bildirimBtn.classList.remove('bildirim-acik');
          bildirimDurum.textContent = "ğŸ”• Bildirimler: KapalÄ±";
          bildirimDurum.classList.remove('acik');
        }
      }
    }

    // Event listener'lar
    bildirimBtn.addEventListener('click', toggleBildirim);
    vakitGetirBtn.addEventListener('click', () => {
      vakitleriGetir(ulkeSelect.value, sehirSelect.value);
      konumuKaydet(ulkeSelect.value, sehirSelect.value);
    });
    konumBtn.addEventListener('click', konumdanVakitGetir);

    // YÃ¼kleniyor durumu
    function setLoading(isLoading) {
      if (isLoading) {
        container.classList.add('loading');
      } else {
        container.classList.remove('loading');
      }
    }

    // KONUMDAN VAKÄ°T GETÄ°RME - TAM Ã‡ALIÅAN VERSÄ°YON
    async function konumdanVakitGetir() {
      if (!navigator.geolocation) {
        alert("TarayÄ±cÄ±nÄ±z konum Ã¶zelliÄŸini desteklemiyor.");
        return;
      }

      konumBtn.disabled = true;
      konumBtn.textContent = "Konum AlÄ±nÄ±yor...";
      setLoading(true);
      
      // Otomatik konum mesajÄ±nÄ± gizle
      autoLocationInfo.style.display = 'none';

      navigator.geolocation.getCurrentPosition(
        async (position) => {
          const { latitude, longitude } = position.coords;
          try {
            console.log("Konum alÄ±ndÄ±:", latitude, longitude);
            
            // 1. Ters CoÄŸrafi Kodlama ile Åehir/Ãœlke AdÄ±nÄ± Al
            const geoResponse = await fetch(
              `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=tr`
            );
            
            if (!geoResponse.ok) {
              throw new Error("Konum API hatasÄ±: " + geoResponse.status);
            }
            
            const locationData = await geoResponse.json();
            console.log("Konum verisi:", locationData);
            
            // 2. Åehir ve Ã¼lke bilgilerini al
            let sehir = locationData.city || locationData.locality || "Bilinmeyen";
            let ulke = locationData.countryName || "Bilinmeyen";
            
            // 3. API iÃ§in Ã¼lke kodu eÅŸleÅŸtirmesi
            let ulkeKodu = ulke;
            if (ulke.toLowerCase().includes("tÃ¼rkiye") || ulke.toLowerCase().includes("turkey")) {
              ulkeKodu = "Turkey";
            } else if (ulke.toLowerCase().includes("almanya") || ulke.toLowerCase().includes("germany")) {
              ulkeKodu = "Germany";
            } else if (ulke.toLowerCase().includes("fransa") || ulke.toLowerCase().includes("france")) {
              ulkeKodu = "France";
            } else if (ulke.toLowerCase().includes("amerika") || ulke.toLowerCase().includes("united states")) {
              ulkeKodu = "USA";
            }
            
            console.log("Ä°ÅŸlenen veri - Åehir:", sehir, "Ãœlke Kodu:", ulkeKodu);
            
            // 4. Åehir eÅŸleÅŸtirmesi yap
            const secilenUlke = ulkeKodu;
            let secilenSehir = sehir;
            
            // Ãœlke listede var mÄ±?
            if (sehirler[secilenUlke]) {
              // Åehir adÄ±nÄ± listedeki bir isimle eÅŸleÅŸtir
              const eslesenSehir = sehirler[secilenUlke].find(s => 
                s.toLowerCase() === sehir.toLowerCase() || 
                sehir.toLowerCase().includes(s.toLowerCase()) ||
                s.toLowerCase().includes(sehir.toLowerCase())
              );
              
              if (eslesenSehir) {
                secilenSehir = eslesenSehir;
                console.log("Åehir eÅŸleÅŸtirildi:", eslesenSehir);
              } else if (sehirler[secilenUlke].length > 0) {
                // EÅŸleÅŸme yoksa listedeki ilk ÅŸehri kullan
                secilenSehir = sehirler[secilenUlke][0];
                console.log("Åehir bulunamadÄ±, varsayÄ±lan kullanÄ±lÄ±yor:", secilenSehir);
              }
            }
            
            // 5. UI'Ä± gÃ¼ncelle
            ulkeSelect.value = secilenUlke;
            sehirleriGuncelle(secilenUlke);
            
            // Åehir seÃ§imini gÃ¼ncelle
            setTimeout(() => {
              if (sehirSelect.querySelector(`option[value="${secilenSehir}"]`)) {
                sehirSelect.value = secilenSehir;
              } else if (sehirSelect.options.length > 0) {
                sehirSelect.selectedIndex = 0;
                secilenSehir = sehirSelect.value;
              }
              
              // 6. Vakitleri getir
              vakitleriGetir(secilenUlke, secilenSehir);
              
              // 7. Konumu kaydet
              konumuKaydet(secilenUlke, secilenSehir);
              
              // 8. Bilgilendirme mesajÄ±
              konumBilgi.textContent = `Konumunuz: ${secilenSehir}, ${ulke}`;
              konumBilgi.style.color = "#388e3c";
              
              // Otomatik konum mesajÄ±nÄ± gÃ¶ster
              autoLocationInfo.style.display = 'block';
              autoLocationInfo.innerHTML = `ğŸ“ Konumunuz <strong>${secilenSehir}, ${ulke}</strong> olarak ayarlandÄ± ve kaydedildi.`;
              
            }, 100);
            
          } catch (error) {
            console.error("Konum iÅŸleme hatasÄ±:", error);
            alert("Konum bilgisi alÄ±namadÄ±. LÃ¼tfen manuel olarak ÅŸehir seÃ§in.");
            autoLocationInfo.style.display = 'none';
          } finally {
            konumBtn.disabled = false;
            konumBtn.textContent = "ğŸ“ Konumumu Kullan";
            setLoading(false);
          }
        },
        (error) => {
          console.error("Konum izin hatasÄ±:", error);
          let hataMesaji = "Konum alÄ±namadÄ±. ";
          switch(error.code) {
            case 1:
              hataMesaji += "Konum izni verilmedi. LÃ¼tfen tarayÄ±cÄ± ayarlarÄ±ndan izin verin.";
              break;
            case 2:
              hataMesaji += "Konum bilgisi alÄ±namadÄ±.";
              break;
            case 3:
              hataMesaji += "Konum alÄ±mÄ± zaman aÅŸÄ±mÄ±na uÄŸradÄ±.";
              break;
            default:
              hataMesaji += "Bilinmeyen bir hata oluÅŸtu.";
          }
          alert(hataMesaji);
          konumBtn.disabled = false;
          konumBtn.textContent = "ğŸ“ Konumumu Kullan";
          setLoading(false);
        },
        {
          enableHighAccuracy: true,
          timeout: 15000,
          maximumAge: 60000
        }
      );
    }

    // Bildirim aÃ§/kapat
    function toggleBildirim() {
      if (!bildirimAktif) {
        if ("Notification" in window) {
          if (typeof Notification.requestPermission === "function") {
            Notification.requestPermission().then(permission => {
              if (permission === "granted") {
                bildirimAktif = true;
                bildirimBtn.textContent = "ğŸ”• Bildirimleri Kapat";
                bildirimBtn.classList.add('bildirim-acik');
                bildirimDurum.textContent = "ğŸ”” Bildirimler: AÃ§Ä±k";
                bildirimDurum.classList.add('acik');
                zamanlayicilariAyarla();
                
                // Test bildirimi
                if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                  new Notification("Namaz Vakitleri", {
                    body: "Bildirimler baÅŸarÄ±yla aÃ§Ä±ldÄ±!",
                    icon: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ•Œ</text></svg>",
                    tag: "test"
                  });
                }
              } else if (permission === "denied") {
                alert("Bildirim izni tarayÄ±cÄ± ayarlarÄ±ndan engellenmiÅŸ.");
              } else {
                alert("Bildirim izni verilmedi.");
              }
            });
          }
        } else {
          alert("Bu tarayÄ±cÄ± bildirimleri desteklemiyor.");
        }
      } else {
        bildirimAktif = false;
        bildirimBtn.textContent = "ğŸ”” Bildirimleri AÃ§";
        bildirimBtn.classList.remove('bildirim-acik');
        bildirimDurum.textContent = "ğŸ”• Bildirimler: KapalÄ±";
        bildirimDurum.classList.remove('acik');
        zamanlayicilariTemizle();
      }
    }

    // Vakitleri getir
    async function vakitleriGetir(ulke, sehir) {
      try {
        vakitGetirBtn.disabled = true;
        vakitGetirBtn.textContent = "YÃ¼kleniyor...";
        setLoading(true);

        const response = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(sehir)}&country=${encodeURIComponent(ulke)}&method=13`);
        const data = await response.json();
        
        if (data.code === 200) {
          namazVakitleri = data.data.timings;
          tabloyuGuncelle();
          konumBilgi.textContent = `Åehir: ${sehir}, Ãœlke: ${ulkeSelect.options[ulkeSelect.selectedIndex].text}`;
          suankiVaktiGuncelle();
          zamanlayicilariAyarla();
        } else {
          throw new Error("API hatasÄ±");
        }
      } catch (error) {
        console.error("Vakit getirme hatasÄ±:", error);
        alert("Vakitler alÄ±namadÄ±. LÃ¼tfen baÅŸka bir ÅŸehir seÃ§in.");
        konumBilgi.textContent = "Vakitler alÄ±namadÄ±. LÃ¼tfen ÅŸehir seÃ§in.";
      } finally {
        vakitGetirBtn.disabled = false;
        vakitGetirBtn.textContent = "ğŸ“… Vakitleri Getir";
        setLoading(false);
      }
    }

    // Tabloyu gÃ¼ncelle
    function tabloyuGuncelle() {
      const table = document.getElementById("vakitler");
      while (table.rows.length > 1) {
        table.deleteRow(1);
      }

      for (const [key, value] of Object.entries(namazVakitleri)) {
        if (ceviri[key]) {
          const row = document.createElement("tr");
          row.innerHTML = `<td>${ceviri[key]}</td><td>${value}</td>`;
          row.id = `row-${ceviri[key]}`;
          table.appendChild(row);
        }
      }
    }

    // Åu anki vakti gÃ¼ncelle
    function suankiVaktiGuncelle() {
      if (suankiVakitTimer) {
        clearInterval(suankiVakitTimer);
      }

      function hesaplaVeGoster() {
        const simdi = new Date();
        const suankiSaat = simdi.getHours().toString().padStart(2, '0') + ':' + 
                          simdi.getMinutes().toString().padStart(2, '0');

        let suankiVakit = null;
        let sonrakiVakit = null;
        let sonrakiVakitSaat = null;

        // Vakitleri kontrol et
        for (let i = 0; i < vakitSirasi.length; i++) {
          const vakit = vakitSirasi[i];
          const vakitSaat = Object.entries(namazVakitleri).find(([key, val]) => ceviri[key] === vakit)?.[1];
          
          if (vakitSaat) {
            if (suankiSaat < vakitSaat) {
              sonrakiVakit = vakit;
              sonrakiVakitSaat = vakitSaat;
              break;
            } else {
              suankiVakit = vakit;
            }
          }
        }

        // Gece yatsÄ±dan imsaka kadar
        if (!sonrakiVakit) {
          sonrakiVakit = "Ä°msak";
          sonrakiVakitSaat = namazVakitleri.Fajr;
        }

        // Tabloyu gÃ¼ncelle
        document.querySelectorAll('#vakitler tr').forEach(tr => {
          tr.classList.remove('current');
        });
        if (suankiVakit) {
          document.getElementById(`row-${suankiVakit}`)?.classList.add('current');
        }

        // Åu anki vakit bilgisini gÃ¶ster
        if (suankiVakit) {
          suankiVakitDiv.style.display = 'block';
          vakitAdi.textContent = `${suankiVakit} Vakti`;
          
          // Kalan sÃ¼reyi hesapla
          const [sonrakiSaat, sonrakiDakika] = sonrakiVakitSaat.split(':').map(Number);
          const sonrakiZaman = new Date();
          sonrakiZaman.setHours(sonrakiSaat, sonrakiDakika, 0, 0);
          
          if (sonrakiZaman < simdi) {
            sonrakiZaman.setDate(sonrakiZaman.getDate() + 1);
          }
          
          const kalanMs = sonrakiZaman - simdi;
          const kalanDakika = Math.floor(kalanMs / (1000 * 60));
          const kalanSaat = Math.floor(kalanDakika / 60);
          const kalanDakikaMod = kalanDakika % 60;
          
          if (kalanSaat > 0) {
            kalanSure.textContent = `Sonraki vakit (${sonrakiVakit}): ${kalanSaat}sa ${kalanDakikaMod}dakika`;
          } else {
            kalanSure.textContent = `Sonraki vakit (${sonrakiVakit}): ${kalanDakikaMod}dakika`;
          }
        } else {
          suankiVakitDiv.style.display = 'none';
        }
      }

      hesaplaVeGoster();
      suankiVakitTimer = setInterval(hesaplaVeGoster, 60000);
    }

    // ZamanlayÄ±cÄ±larÄ± ayarla
    function zamanlayicilariAyarla() {
      if (!bildirimAktif) return;
      
      zamanlayicilariTemizle();

      for (const [key, value] of Object.entries(namazVakitleri)) {
        if (ceviri[key]) {
          scheduleNotification(ceviri[key], value);
        }
      }
    }

    // ZamanlayÄ±cÄ±larÄ± temizle
    function zamanlayicilariTemizle() {
      zamanlayicilar.forEach(timer => clearTimeout(timer));
      zamanlayicilar = [];
    }

    // Bildirim planlama
    function scheduleNotification(vakitAdi, saat) {
      const [h, m] = saat.split(":").map(Number);
      const now = new Date();
      const target = new Date();
      target.setHours(h, m, 0, 0);

      if (target < now) {
        target.setDate(target.getDate() + 1);
      }

      const ms = target - now;
      const timer = setTimeout(() => {
        if (Notification.permission === "granted" && bildirimAktif) {
          new Notification("Namaz Vakti", {
            body: `${vakitAdi} vakti girdi.`,
            icon: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ•Œ</text></svg>",
            tag: vakitAdi
          });
        }
        
        // Tekrar zamanla (ertesi gÃ¼n iÃ§in)
        scheduleNotification(vakitAdi, saat);
      }, ms);

      zamanlayicilar.push(timer);
    }

    // Mobil iÃ§in touch event
    document.addEventListener('touchstart', function() {}, {passive: true});
  </script>
</body>
</html>

 







